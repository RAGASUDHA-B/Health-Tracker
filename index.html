<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Wellness Hub ‚Äî Premium</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
  <style>
    :root{
      --bg-grad: radial-gradient(1200px 800px at 10% 10%, rgba(58,134,255,.18), transparent 60%),
                 radial-gradient(1000px 700px at 90% 20%, rgba(111,66,193,.18), transparent 60%),
                 radial-gradient(900px 600px at 20% 90%, rgba(56,142,60,.16), transparent 50%);
      --glass-bg: rgba(255,255,255,0.65);
      --glass-border: rgba(255,255,255,0.35);
      --text: #0b1220;
      --muted: #63708a;
      --surface: #ffffff;
    }
    [data-theme="dark"]{
      --bg-grad: radial-gradient(1200px 800px at 10% 10%, rgba(58,134,255,.12), transparent 60%),
                 radial-gradient(1000px 700px at 90% 20%, rgba(255,99,132,.12), transparent 60%),
                 radial-gradient(900px 600px at 20% 90%, rgba(56,142,60,.12), transparent 50%);
      --glass-bg: rgba(20,22,30,0.55);
      --glass-border: rgba(255,255,255,0.08);
      --text: #e8ecf5;
      --muted: #a4afc4;
      --surface: #11141a;
    }
    html,body{height:100%}
    body{
      font-family: 'Poppins', sans-serif;
      color: var(--text);
      background: linear-gradient(180deg, rgba(255,255,255,.6), rgba(255,255,255,.8)), var(--bg-grad);
      background-attachment: fixed;
    }
    .glass{
      background: var(--glass-bg);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid var(--glass-border);
      border-radius: 1.25rem;
      box-shadow: 0 10px 30px rgba(0,0,0,.08);
    }
    .hero{
      position: relative; overflow: hidden; border-radius: 1.5rem;
    }
    .hero::after{
      content: ""; position:absolute; inset:0; background: radial-gradient(circle at 70% 30%, rgba(255,255,255,.18), transparent 40%);
      pointer-events:none;
    }
    .hero-cta .btn{ border-radius: 999px; padding: .75rem 1.25rem; }
    .progress{height: 12px; border-radius: 999px;}
    .stat-card{ transition: transform .2s ease, box-shadow .2s ease; }
    .stat-card:hover{ transform: translateY(-4px); box-shadow: 0 14px 40px rgba(0,0,0,.18); }
    .floating-bar{
      position: fixed; right: 1rem; bottom: 1rem; z-index: 1040; display: flex; gap: .5rem; flex-direction: column;
    }
    .fab-btn{ border-radius: 999px; padding: .85rem 1rem; box-shadow: 0 10px 30px rgba(0,0,0,.25); }
    .section-title{ font-weight:700; letter-spacing:.3px }
    .story-card{ border-left: 4px solid #7c4dff }
    .avatar{ width:40px; height:40px; border-radius:50%; object-fit:cover }
    .chart-wrap{ height:240px }
    .mode-toggle{ cursor:pointer }
    .quote{ font-size: .95rem; color: var(--muted); }
    .badge-soft{ background: rgba(99,102,241,.12); color:#6366f1; }
    .kbd{border:1px solid var(--glass-border); border-bottom-width:2px; padding:.1rem .35rem; border-radius:.4rem; background:var(--surface)}
  </style>
</head>
<body class="pb-5">
  <nav class="navbar navbar-expand-lg glass mt-3 mx-3 px-3">
    <a class="navbar-brand fw-bold" href="#">üåø Wellness Hub</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#nav" aria-controls="nav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item"><a class="nav-link" href="#tracker">Tracker</a></li>
        <li class="nav-item"><a class="nav-link" href="#mental">Mental Hub</a></li>
        <li class="nav-item"><a class="nav-link" href="#stories">Stories</a></li>
      </ul>
      <div class="d-flex align-items-center gap-2">
        <span class="small text-secondary">Press <span class="kbd">D</span> to toggle</span>
        <button id="modeBtn" class="btn btn-outline-secondary btn-sm mode-toggle" title="Toggle dark mode"><i class="fa-solid fa-moon"></i></button>
      </div>
    </div>
  </nav>
  <header class="container mt-4">
    <div class="hero glass p-5 p-md-6 text-center text-md-start">
      <div class="row align-items-center g-4">
        <div class="col-lg-7">
          <h1 class="display-5 fw-bold mb-3 animate__animated animate__fadeInUp">Feel Better, Every Day</h1>
          <p class="lead mb-4">Track your body. Train your mind. Share your story ‚Äî privately.
            Wellness Hub blends health tracking, bite‚Äësize mental games, and an anonymous community wall in a single, beautiful dashboard.</p>
          <div class="hero-cta d-flex gap-2">
            <a href="#tracker" class="btn btn-primary"><i class="fa-solid fa-gauge-high me-2"></i>Open Dashboard</a>
            <a href="#stories" class="btn btn-outline-primary"><i class="fa-solid fa-feather me-2"></i>Share a Story</a>
          </div>
          <p class="quote mt-3" id="quoteText">‚ÄúSmall steps add up to big changes.‚Äù</p>
        </div>
        <div class="col-lg-5">
          <div class="glass p-4 text-center">
            <div class="row g-3">
              <div class="col-6"><div class="p-3 stat-card glass">
                <div class="text-muted small">Steps</div>
                <div class="fs-3 fw-bold" id="animSteps">0</div>
              </div></div>
              <div class="col-6"><div class="p-3 stat-card glass">
                <div class="text-muted small">Water</div>
                <div class="fs-3 fw-bold" id="animWater">0 L</div>
              </div></div>
              <div class="col-6"><div class="p-3 stat-card glass">
                <div class="text-muted small">Calories</div>
                <div class="fs-3 fw-bold" id="animCals">0 kcal</div>
              </div></div>
              <div class="col-6"><div class="p-3 stat-card glass">
                <div class="text-muted small">Streak</div>
                <div class="fs-3 fw-bold" id="animStreak">0 üî•</div>
              </div></div>
            </div>
            <div class="mt-3 small text-secondary">Auto‚Äësaves to your browser ‚Ä¢ No sign‚Äëup</div>
          </div>
        </div>
      </div>
    </div>
  </header>
  <section id="tracker" class="container mt-5">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h2 class="section-title">Health Tracker</h2>
      <span class="badge rounded-pill badge-soft"><i class="fa-solid fa-cloud-arrow-down me-1"></i>Local Save ON</span>
    </div>

    <div class="row g-4">
      <div class="col-md-6 col-xl-3">
        <div class="glass p-4 h-100">
          <div class="d-flex align-items-center justify-content-between mb-2">
            <h6 class="mb-0">Steps</h6>
            <i class="fa-solid fa-shoe-prints text-success"></i>
          </div>
          <div class="fs-3 fw-bold" id="stepsCount">0</div>
          <div class="progress my-3"><div id="stepsProgress" class="progress-bar bg-success" style="width:0%"></div></div>
          <div class="input-group">
            <input type="number" id="stepsInput" class="form-control" placeholder="Add steps" min="0">
            <button class="btn btn-success" id="addStepsBtn">Add</button>
          </div>
          <div class="small text-secondary mt-2">Daily goal: <span id="stepGoalTxt">10,000</span></div>
        </div>
      </div>

      <div class="col-md-6 col-xl-3">
        <div class="glass p-4 h-100">
          <div class="d-flex align-items-center justify-content-between mb-2">
            <h6 class="mb-0">Calories Burned</h6>
            <i class="fa-solid fa-fire text-danger"></i>
          </div>
          <div class="fs-3 fw-bold" id="caloriesCount">0 kcal</div>
          <div class="progress my-3"><div id="caloriesProgress" class="progress-bar bg-warning" style="width:0%"></div></div>
          <div class="input-group">
            <input type="number" id="caloriesInput" class="form-control" placeholder="Add kcal" min="0">
            <button class="btn btn-warning" id="addCaloriesBtn">Add</button>
          </div>
          <div class="small text-secondary mt-2">Daily goal: <span id="calGoalTxt">500</span> kcal</div>
        </div>
      </div>

      <div class="col-md-6 col-xl-3">
        <div class="glass p-4 h-100">
          <div class="d-flex align-items-center justify-content-between mb-2">
            <h6 class="mb-0">Water</h6>
            <i class="fa-solid fa-droplet text-info"></i>
          </div>
          <div class="fs-3 fw-bold" id="waterCount">0 L</div>
          <div class="progress my-3"><div id="waterProgress" class="progress-bar bg-info" style="width:0%"></div></div>
          <div class="input-group">
            <input type="number" step="0.1" id="waterInput" class="form-control" placeholder="Add liters" min="0" max="10">
            <button class="btn btn-info" id="addWaterBtn">Add</button>
          </div>
          <div class="small text-secondary mt-2">Daily goal: <span id="waterGoalTxt">3</span> L</div>
        </div>
      </div>

      <div class="col-md-6 col-xl-3">
        <div class="glass p-4 h-100">
          <div class="d-flex align-items-center justify-content-between mb-2">
            <h6 class="mb-0">Weight</h6>
            <i class="fa-solid fa-weight-scale text-secondary"></i>
          </div>
          <div class="fs-3 fw-bold" id="weightCount">0 kg</div>
          <div class="input-group mt-3">
            <input type="number" id="weightInput" class="form-control" placeholder="Update kg" min="0" max="500">
            <button class="btn btn-secondary" id="setWeightBtn">Set</button>
          </div>
          <div class="small text-secondary mt-2">Change over time</div>
          <div class="chart-wrap"><canvas id="weightChart"></canvas></div>
        </div>
      </div>
    </div>

    <div class="mt-4 d-flex gap-2 flex-wrap">
      <button class="btn btn-outline-primary btn-sm" id="resetDay"><i class="fa-solid fa-rotate"></i> Reset Today</button>
      <button class="btn btn-outline-secondary btn-sm" id="editGoals"><i class="fa-solid fa-bullseye"></i> Edit Goals</button>
    </div>
  </section>
  <section id="mental" class="container mt-5">
    <h2 class="section-title mb-3">Mental Health Hub</h2>
    <div class="row g-4">
      <div class="col-lg-6">
        <div class="glass p-4 h-100">
          <h6 class="d-flex align-items-center gap-2 mb-3"><i class="fa-solid fa-brain"></i> Reaction Time</h6>
          <p class="small text-secondary">Press start, wait for green, then click as fast as you can.</p>
          <div class="d-flex gap-2 mb-2">
            <button class="btn btn-primary" id="reactStart">Start</button>
            <div class="fw-semibold">Result: <span id="reactResult">‚Äî</span></div>
          </div>
          <div id="reactBox" class="w-100 rounded-3" style="height:120px;background:#bd3a3a"></div>
        </div>
      </div>
      <div class="col-lg-6">
        <div class="glass p-4 h-100">
          <h6 class="d-flex align-items-center gap-2 mb-3"><i class="fa-solid fa-wind"></i> Breathing Exercise</h6>
          <p class="small text-secondary">Follow the circle: Inhale ‚ñ∂ Hold ‚ñ∂ Exhale (4‚Äë4‚Äë4).</p>
          <div class="d-flex align-items-center gap-3">
            <button class="btn btn-success" id="breatheBtn">Start 60s</button>
            <div>Phase: <span class="fw-semibold" id="breathePhase">‚Äî</span></div>
          </div>
          <div class="py-4 text-center">
            <div id="breatheCircle" class="mx-auto" style="width:120px;height:120px;border-radius:50%;background:linear-gradient(145deg,#7dd3fc,#60a5fa);"></div>
          </div>
        </div>
      </div>

      <div class="col-12">
        <div class="glass p-4">
          <h6 class="d-flex align-items-center gap-2 mb-3"><i class="fa-solid fa-brain"></i> Memory Match</h6>
          <p class="small text-secondary">Flip cards to find pairs. Great for focus!</p>
          <div id="memoryGrid" class="row g-3"></div>
        </div>
      </div>
    </div>
  </section>
  <section id="stories" class="container mt-5">
    <h2 class="section-title mb-3">Anonymous Story Wall</h2>
    <div class="glass p-4 mb-3">
      <div class="row g-3 align-items-end">
        <div class="col-md-9">
          <label class="form-label">Share (no name required)</label>
          <textarea id="storyInput" rows="3" class="form-control" placeholder="Write about your day, a challenge, a win‚Ä¶"></textarea>
        </div>
        <div class="col-md-3 d-grid gap-2">
          <label class="form-label">Mood</label>
          <select id="moodSel" class="form-select">
            <option value="üôÇ">üôÇ Okay</option>
            <option value="üòÑ">üòÑ Happy</option>
            <option value="üòî">üòî Low</option>
            <option value="üò§">üò§ Stressed</option>
            <option value="ü§ó">ü§ó Grateful</option>
          </select>
          <button class="btn btn-dark" id="postStory"><i class="fa-solid fa-paper-plane me-1"></i>Post</button>
        </div>
      </div>
    </div>
    <div id="storiesList" class="row g-3"></div>
  </section>
  <div class="floating-bar">
    <button class="btn btn-primary fab-btn" id="quickWater" title="+0.25 L"><i class="fa-solid fa-glass-water"></i></button>
    <button class="btn btn-success fab-btn" id="quickSteps" title="+500 steps"><i class="fa-solid fa-person-walking"></i></button>
    <button class="btn btn-dark fab-btn" onclick="document.querySelector('#storyInput').focus()" title="Write a story"><i class="fa-solid fa-feather"></i></button>
  </div>

  <footer class="container text-center mt-5 text-secondary">
    <div class="small">Wellness Hub ‚Ä¢ Built with Bootstrap 5 ‚Ä¢ Saves locally ‚Ä¢ <span id="year"></span></div>
  </footer>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>

  <script>
    const $ = sel => document.querySelector(sel);
    const $$ = sel => document.querySelectorAll(sel);

    const state = JSON.parse(localStorage.getItem('wellness-state')||'{}');
    const todayKey = new Date().toISOString().slice(0,10);
    if(!state.days) state.days = {};
    if(!state.days[todayKey]) state.days[todayKey] = {steps:0,cals:0,water:0,weight:0};
    if(!state.weightHistory) state.weightHistory = []; // {date, kg}
    if(!state.stories) state.stories = [];
    if(!state.goals) state.goals = {step:10000, cal:500, water:3};
    if(state.theme==null) state.theme = 'light';

    function save(){ localStorage.setItem('wellness-state', JSON.stringify(state)); }
    function applyTheme(){
      document.documentElement.setAttribute('data-theme', state.theme);
      $('#modeBtn').innerHTML = state.theme==='dark' ? '<i class="fa-solid fa-sun"></i>' : '<i class="fa-solid fa-moon"></i>';
    }
    applyTheme();
    $('#modeBtn').addEventListener('click', ()=>{ state.theme = state.theme==='dark'?'light':'dark'; applyTheme(); save();});
    document.addEventListener('keydown', (e)=>{ if(e.key.toLowerCase()==='d'){ $('#modeBtn').click(); }});

    const quotes = [
      "Small steps add up to big changes.",
      "Be kind to your mind.",
      "Hydrate, move, breathe ‚Äì repeat.",
      "Progress, not perfection.",
      "Your story matters."
    ];
    function rotateQuote(){ $('#quoteText').textContent = '‚Äú'+quotes[Math.floor(Math.random()*quotes.length)]+'‚Äù'; }
    setInterval(rotateQuote, 6000);
    const day = state.days[todayKey];
    const goals = state.goals;

    function fmt(n){ return n.toLocaleString(); }

    function renderTracker(){
      $('#stepsCount').textContent = fmt(day.steps);
      $('#caloriesCount').textContent = fmt(day.cals) + ' kcal';
      $('#waterCount').textContent = (Math.round(day.water*100)/100) + ' L';
      $('#weightCount').textContent = day.weight ? day.weight + ' kg' : '0 kg';

      $('#stepGoalTxt').textContent = fmt(goals.step);
      $('#calGoalTxt').textContent = fmt(goals.cal);
      $('#waterGoalTxt').textContent = goals.water;

      $('#stepsProgress').style.width = Math.min(day.steps/goals.step*100,100)+'%';
      $('#caloriesProgress').style.width = Math.min(day.cals/goals.cal*100,100)+'%';
      $('#waterProgress').style.width = Math.min(day.water/goals.water*100,100)+'%';
    }

    function animateCounters(){
      const dur = 900; const start = performance.now();
      const s0=0, s1=day.steps; const w0=0, w1=day.water; const c0=0, c1=day.cals; const t0=0, t1=(state.weightHistory.length>1? calcStreak():0);
      function step(t){
        const p = Math.min((t-start)/dur,1);
        $('#animSteps').textContent = Math.round(s0+(s1-s0)*p);
        $('#animWater').textContent = (Math.round((w0+(w1-w0)*p)*10)/10)+' L';
        $('#animCals').textContent = Math.round(c0+(c1-c0)*p)+' kcal';
        $('#animStreak').textContent = Math.round(t0+(t1-t0)*p) + ' üî•';
        if(p<1) requestAnimationFrame(step);
      }
      requestAnimationFrame(step);
    }
    $('#addStepsBtn').addEventListener('click', ()=>{ day.steps += parseInt($('#stepsInput').value||0); $('#stepsInput').value=''; renderTracker(); save(); });
    $('#addCaloriesBtn').addEventListener('click', ()=>{ day.cals += parseInt($('#caloriesInput').value||0); $('#caloriesInput').value=''; renderTracker(); save(); });
    $('#addWaterBtn').addEventListener('click', ()=>{ day.water += parseFloat($('#waterInput').value||0); $('#waterInput').value=''; renderTracker(); save(); });
    $('#setWeightBtn').addEventListener('click', ()=>{
      const kg = parseFloat($('#weightInput').value||0); if(!kg) return; day.weight = kg; state.weightHistory.push({date: todayKey, kg}); $('#weightInput').value=''; renderTracker(); updateWeightChart(); save();
    });

    $('#resetDay').addEventListener('click', ()=>{ if(confirm('Reset today\'s entries?')){ state.days[todayKey]={steps:0,cals:0,water:0,weight:0}; location.reload(); }});
    $('#editGoals').addEventListener('click', ()=>{
      const s = parseInt(prompt('Step goal', goals.step)||goals.step);
      const c = parseInt(prompt('Calorie goal', goals.cal)||goals.cal);
      const w = parseFloat(prompt('Water goal (L)', goals.water)||goals.water);
      state.goals={step:s,cal:c,water:w}; renderTracker(); save();
    });

    $('#quickWater').addEventListener('click', ()=>{ day.water+=0.25; renderTracker(); save(); });
    $('#quickSteps').addEventListener('click', ()=>{ day.steps+=500; renderTracker(); save(); });
    let wChart;
    function updateWeightChart(){
      const labels = state.weightHistory.map(x=>x.date);
      const data = state.weightHistory.map(x=>x.kg);
      const ctx = document.getElementById('weightChart');
      if(!wChart){
        wChart = new Chart(ctx, { type: 'line', data: { labels, datasets: [{ label:'kg', data, tension:.35, fill:false }] }, options: { responsive:true, scales:{ y:{ ticks:{ callback:(v)=>v+' kg' }}}}});
      } else { wChart.data.labels = labels; wChart.data.datasets[0].data = data; wChart.update(); }
    }

    function calcStreak(){
      let streak=0; let prev=null; const arr=[...state.weightHistory];
      arr.sort((a,b)=>a.date.localeCompare(b.date));
      for(const x of arr){ if(prev){ const next = new Date(prev); next.setDate(next.getDate()+1); if(x.date===next.toISOString().slice(0,10)) streak++; else streak=1; } else streak=1; prev=new Date(x.date); }
      return streak;
    }
    let reactTimer, reactStartTime;
    $('#reactStart').addEventListener('click', ()=>{
      $('#reactResult').textContent='wait...';
      $('#reactBox').style.background='#bd3a3a';
      clearTimeout(reactTimer);
      reactTimer = setTimeout(()=>{
        $('#reactBox').style.background='#2e7d32';
        $('#reactResult').textContent='CLICK!';
        reactStartTime = performance.now();
      }, 800 + Math.random()*2400);
    });
    $('#reactBox').addEventListener('click', ()=>{
      if($('#reactBox').style.background.includes('2e7d32')){
        const t = Math.round(performance.now() - reactStartTime);
        $('#reactResult').textContent = t + ' ms';
      }
    });
    let breatheTimer, breatheElapsed=0;
    const phases = [ ['Inhale',4], ['Hold',4], ['Exhale',4] ];
    function startBreathing(){
      const endAt = performance.now()+60000; // 60s
      let phaseIndex=0, phaseStart=performance.now();
      $('#breathePhase').textContent = phases[0][0];
      $('#breatheCircle').style.transition='transform 4s ease';
      $('#breatheCircle').style.transform='scale(1.2)';
      clearInterval(breatheTimer);
      breatheTimer = setInterval(()=>{
        const [name, dur] = phases[phaseIndex];
        const elapsed = (performance.now()-phaseStart)/1000;
        if(elapsed>=dur){
          phaseIndex = (phaseIndex+1)%phases.length; phaseStart = performance.now();
          const [n2] = phases[phaseIndex]; $('#breathePhase').textContent = n2;
          if(n2==='Inhale') $('#breatheCircle').style.transform='scale(1.2)';
          if(n2==='Hold') $('#breatheCircle').style.transform='scale(1)';
          if(n2==='Exhale') $('#breatheCircle').style.transform='scale(.8)';
        }
        if(performance.now()>=endAt){ clearInterval(breatheTimer); $('#breathePhase').textContent='Done'; $('#breatheCircle').style.transform='scale(1)'; }
      }, 120);
    }
    $('#breatheBtn').addEventListener('click', startBreathing);
    const icons = ['üçé','üçã','üçá','üçì','ü•ù','üçâ','üçë','ü••'];
    function buildMemory(){
      const pool = [...icons, ...icons].sort(()=>Math.random()-0.5);
      const grid = $('#memoryGrid'); grid.innerHTML='';
      pool.forEach((sym,i)=>{
        const col = document.createElement('div'); col.className='col-3 col-md-2';
        const card = document.createElement('button'); card.className='btn w-100 glass py-3 fw-bold'; card.dataset.sym=sym; card.textContent='?';
        card.addEventListener('click',()=>flip(card));
        col.appendChild(card); grid.appendChild(col);
      });
    }
    let first=null, lock=false, found=0;
    function flip(btn){ if(lock||btn.disabled) return; btn.textContent=btn.dataset.sym; btn.disabled=true; if(!first){ first=btn; return; } lock=true; setTimeout(()=>{
      if(first.dataset.sym===btn.dataset.sym){ found+=2; first.classList.add('btn-success'); btn.classList.add('btn-success'); }
      else{ first.textContent='?'; btn.textContent='?'; first.disabled=false; btn.disabled=false; }
      first=null; lock=false; if(found===icons.length*2){ setTimeout(()=>alert('Great memory!'), 200); }
    }, 450); }
    function renderStories(){
      const list = $('#storiesList'); list.innerHTML='';
      state.stories.slice().reverse().forEach(s=>{
        const col = document.createElement('div'); col.className='col-12';
        col.innerHTML = `
          <div class="glass p-3 story-card">
            <div class="d-flex gap-3">
              <img class="avatar" src="https://api.dicebear.com/7.x/shapes/svg?seed=${encodeURIComponent(s.seed)}" alt="avatar">
              <div class="flex-grow-1">
                <div class="d-flex justify-content-between align-items-center">
                  <div class="fw-semibold">Anonymous <span class="ms-2">${s.mood}</span></div>
                  <div class="small text-secondary">${new Date(s.ts).toLocaleString()}</div>
                </div>
                <div class="mt-1">${s.text.replace(/</g,'&lt;')}</div>
              </div>
            </div>
          </div>`;
        list.appendChild(col);
      });
    }
    $('#postStory').addEventListener('click', ()=>{
      const text = $('#storyInput').value.trim(); if(!text) return;
      const mood = $('#moodSel').value; const seed = Math.random().toString(36).slice(2);
      state.stories.push({ text, mood, seed, ts: Date.now() }); save(); $('#storyInput').value=''; renderStories();
    });
    function init(){
      document.getElementById('year').textContent = new Date().getFullYear();
      renderTracker(); animateCounters(); updateWeightChart(); buildMemory(); renderStories(); rotateQuote();
    }
    init();
  </script>
</body>
</html>
